# –î–æ–±—Ä–æ –≤ MAX - –ë–æ—Ç –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ MAX

–ë–æ—Ç –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ MAX, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏. –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–º–æ—â—å, –æ—Ç–∫–ª–∏–∫–∞—Ç—å—Å—è –Ω–∞ –Ω–∏—Ö –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ –¥–ª—è –¥–æ–±—Ä—ã—Ö –¥–µ–ª.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìã **–ö–∞—Ç–∞–ª–æ–≥ –∑–∞—è–≤–æ–∫** - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞—è–≤–æ–∫ –Ω–∞ –ø–æ–º–æ—â—å
- ‚ûï **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫** - –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ —Å –≤—ã–±–æ—Ä–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–∏–ø–∞ –∏ —Ä–µ–≥–∏–æ–Ω–∞
- ‚úã **–û—Ç–∫–ª–∏–∫ –Ω–∞ –∑–∞—è–≤–∫–∏** - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –∑–∞—è–≤–∫–∏
- üë§ **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –∑–∞—è–≤–æ–∫ –∏ –æ—Ç–∫–ª–∏–∫–æ–≤
- üîç **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —Ä–µ–≥–∏–æ–Ω–∞–º –∏ —Ç–∏–ø–∞–º
- üè∑Ô∏è **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** - –ò–Ω–∫–ª—é–∑–∏—è, –≠–∫–æ–ª–æ–≥–∏—è, –ó–¥–æ—Ä–æ–≤—å–µ, –ö—É–ª—å—Ç—É—Ä–∞, –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å, –°–ø–æ—Ä—Ç, –ñ–∏–≤–æ—Ç–Ω—ã–µ
- üîò **Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–¥–æ–±–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- Docker –∏ Docker Compose (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç MAX (–ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –±–æ—Ç–∞ –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone <repository-url>
cd DOBRO_V_MAX
```

#### 2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`

```bash
cp .env.example .env
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤—Ä—É—á–Ω—É—é:

```env
BOT_TOKEN=your-bot-token-here
WEBHOOK_URL=https://your-domain.com
MAX_API_URL=https://platform-api.max.ru
PORT=3000
DB_PATH=./data/dobro.db
```

**–í–∞–∂–Ω–æ:** 
- –ó–∞–º–µ–Ω–∏—Ç–µ `your-bot-token-here` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç MAX (–ø–æ–ª—É—á–∏—Ç–µ –Ω–∞ https://dev.max.ru)
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL (—Å–º. —Ä–∞–∑–¥–µ–ª "–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞")

#### 3. –°–æ–±–µ—Ä–∏—Ç–µ Docker-–æ–±—Ä–∞–∑

```bash
docker build -t dobro-max-bot .
```

#### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
docker run -d \
  --name dobro-max-bot \
  -p 3000:3000 \
  --env-file .env \
  -v $(pwd)/data:/app/data \
  dobro-max-bot
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker Compose (—Å–æ–∑–¥–∞–π—Ç–µ `docker-compose.yml`):

```yaml
version: '3.8'

services:
  bot:
    build: .
    container_name: dobro-max-bot
    ports:
      - "3000:3000"
    env_file:
      - .env
    volumes:
      - ./data:/app/data
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "node", "-e", "require('http').get('http://localhost:3000/health', (r) => {process.exit(r.statusCode === 200 ? 0 : 1)})"]
      interval: 30s
      timeout: 3s
      retries: 3
```

–ó–∞–ø—É—Å–∫:

```bash
docker-compose up -d
```

#### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ health check
curl http://localhost:3000/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MAX API
docker exec dobro-max-bot npm run test-bot
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

#### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (—Å–º. –≤—ã—à–µ).

#### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API

```bash
npm run test-bot
```

#### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π)
npm run dev

# –ò–ª–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
npm start
```

**–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL –¥–ª—è webhook:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok: https://ngrok.com
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok:
   ```bash
   ngrok http 3000
   ```
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)
4. –û–±–Ω–æ–≤–∏—Ç–µ `WEBHOOK_URL` –≤ `.env` –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π HTTPS URL
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

## üì° –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `WEBHOOK_URL`, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MAX:

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º –Ω–∞ https://dev.max.ru
2. –£–∫–∞–∂–∏—Ç–µ webhook URL: `https://your-domain.com/webhook/YOUR_BOT_TOKEN`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–í–∞–∂–Ω–æ:** Webhook URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ –ø–æ HTTPS. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/health` endpoint.

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:

```mermaid
sequenceDiagram
    participant User as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant MAX as üì± MAX Messenger
    participant Webhook as üîó Webhook Server
    participant Bot as ü§ñ –ë–æ—Ç
    participant API as üåê MAX API
    participant DB as üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

    User->>MAX: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É /start
    MAX->>Webhook: POST /webhook/:token<br/>(event: message_created)
    Webhook->>Bot: handleUpdate(event)
    Bot->>DB: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    Bot->>API: POST /messages<br/>(chat_id, text, attachments)
    API-->>Bot: –û—Ç–≤–µ—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
    Bot->>Webhook: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    Webhook->>MAX: HTTP 200 OK
    MAX->>User: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞
    
    Note over User,DB: –û–±—Ä–∞–±–æ—Ç–∫–∞ callback-–∑–∞–ø—Ä–æ—Å–æ–≤
    User->>MAX: –ù–∞–∂–∏–º–∞–µ—Ç inline-–∫–Ω–æ–ø–∫—É
    MAX->>Webhook: POST /webhook/:token<br/>(event: message_callback)
    Webhook->>Bot: handleCallbackQuery(event)
    Bot->>DB: –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    Bot->>API: POST /messages<br/>(–æ—Ç–≤–µ—Ç –Ω–∞ callback)
    API-->>Bot: –û—Ç–≤–µ—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
    MAX->>User: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

```mermaid
flowchart TD
    A[–ù–∞—á–∞–ª–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏] --> B[–°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª]
    B --> C[–ü–æ–ª—É—á–∏—Ç—å BOT_TOKEN –Ω–∞ dev.max.ru]
    C --> D{–õ–æ–∫–∞–ª—å–Ω–∞—è<br/>—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞?}
    
    D -->|–î–∞| E[–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ngrok]
    E --> F[–ó–∞–ø—É—Å—Ç–∏—Ç—å ngrok http 3000]
    F --> G[–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å HTTPS URL]
    G --> H[–û–±–Ω–æ–≤–∏—Ç—å WEBHOOK_URL –≤ .env]
    
    D -->|–ù–µ—Ç| I[–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ]
    I --> J[–£–∫–∞–∑–∞—Ç—å WEBHOOK_URL –Ω–∞ –¥–æ–º–µ–Ω]
    
    H --> K[–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏<br/>npm install]
    J --> K
    K --> L[–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ<br/>npm run test-bot]
    L --> M{–¢–æ–∫–µ–Ω<br/>–≤–∞–ª–∏–¥–Ω—ã–π?}
    
    M -->|–ù–µ—Ç| C
    M -->|–î–∞| N[–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞<br/>npm run dev]
    N --> O[–ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook<br/>–≤ –ø–∞–Ω–µ–ª–∏ MAX]
    O --> P[–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É<br/>–æ—Ç–ø—Ä–∞–≤–∏—Ç—å /start]
    P --> Q{–ë–æ—Ç<br/>–æ—Ç–≤–µ—á–∞–µ—Ç?}
    
    Q -->|–ù–µ—Ç| R[–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏]
    R --> S[–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏]
    S --> N
    Q -->|–î–∞| T[‚úÖ –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ]
    
    style T fill:#90EE90
    style M fill:#FFE4B5
    style Q fill:#FFE4B5
    style R fill:#FFB6C1
```

## üîÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ –±–æ—Ç–µ

```mermaid
flowchart TD
    A[Webhook –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ] --> B{–¢–∏–ø —Å–æ–±—ã—Ç–∏—è}
    
    B -->|message_created| C[handleMessage]
    B -->|message_callback| D[handleCallbackQuery]
    B -->|callback_query| D
    B -->|bot_started| E[handleStart]
    B -->|bot_stopped| F[–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ]
    B -->|–î—Ä—É–≥–æ–µ| G[–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è]
    
    C --> H{–ö–æ–º–∞–Ω–¥–∞<br/>–∏–ª–∏ —Ç–µ–∫—Å—Ç?}
    H -->|–ö–æ–º–∞–Ω–¥–∞ /start| E
    H -->|–ö–æ–º–∞–Ω–¥–∞ /catalog| I[handleCatalog]
    H -->|–ö–æ–º–∞–Ω–¥–∞ /create| J[handleCreateRequest]
    H -->|–ö–æ–º–∞–Ω–¥–∞ /profile| K[handleProfile]
    H -->|–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏| L[–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏]
    H -->|–û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç| M{–ï—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ<br/>–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?}
    
    M -->|–î–∞, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏| N[handleRequestCreationStep]
    M -->|–ù–µ—Ç| E
    
    D --> O{–¢–∏–ø callback}
    O -->|view_request| P[handleViewRequest]
    O -->|respond_request| Q[handleRespondToRequest]
    O -->|category| R[–û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ]
    O -->|type| R
    O -->|region| R
    O -->|confirm| S[–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É]
    O -->|cancel| T[handleCancel]
    O -->|page| I
    O -->|filter| U[handleFilter]
    
    I --> V[–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ<br/>—Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π]
    J --> V
    K --> V
    P --> V
    Q --> V
    E --> V
    N --> V
    S --> V
    T --> V
    U --> V
    
    V --> W[botAPI.sendMessage]
    W --> X{–£—Å–ø–µ—à–Ω–æ?}
    X -->|–î–∞| Y[‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ]
    X -->|–ù–µ—Ç| Z[–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏<br/>—Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏]
    
    style Y fill:#90EE90
    style Z fill:#FFB6C1
    style V fill:#87CEEB
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

```mermaid
flowchart LR
    A[–í—ã–∑–æ–≤ sendMessage] --> B[–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ body]
    B --> C[–î–æ–±–∞–≤–ª–µ–Ω–∏–µ format]
    C --> D[–î–æ–±–∞–≤–ª–µ–Ω–∏–µ attachments]
    D --> E{–ü–æ–ø—ã—Ç–∫–∞ 1:<br/>/messages}
    E -->|404| F{–ü–æ–ø—ã—Ç–∫–∞ 2:<br/>/bot/messages}
    F -->|404| G{–ü–æ–ø—ã—Ç–∫–∞ 3:<br/>/v1/messages}
    G -->|404| H[‚ùå –í—Å–µ endpoint'—ã<br/>–Ω–µ –Ω–∞–π–¥–µ–Ω—ã]
    E -->|200| I[‚úÖ –£—Å–ø–µ—Ö]
    F -->|200| I
    G -->|200| I
    E -->|401| J[‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏<br/>üí° –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω]
    E -->|400| K[‚ùå –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞<br/>üí° –ü—Ä–æ–≤–µ—Ä–∏—Ç—å body]
    F -->|401| J
    F -->|400| K
    G -->|401| J
    G -->|400| K
    
    style I fill:#90EE90
    style H fill:#FFB6C1
    style J fill:#FFB6C1
    style K fill:#FFB6C1
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ server.js              # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞ (Express)
‚îú‚îÄ‚îÄ config.js              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Dockerfile             # Docker-–æ–±—Ä–∞–∑ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ requirements.txt       # –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å –≤–µ—Ä—Å–∏—è–º–∏
‚îú‚îÄ‚îÄ package.json           # Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example           # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ api.js             # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è MAX Bot API
‚îÇ   ‚îú‚îÄ‚îÄ handlers/          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/         # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä (–∫–Ω–æ–ø–æ–∫)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ messages/          # –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îî‚îÄ‚îÄ database/          # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SQLite
‚îÇ       ‚îî‚îÄ‚îÄ index.js
‚îú‚îÄ‚îÄ scripts/               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ setup-webhook.js   # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
‚îÇ   ‚îî‚îÄ‚îÄ test-bot.js        # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API
‚îî‚îÄ‚îÄ data/                  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üìù –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- `/catalog` –∏–ª–∏ `/–∫–∞—Ç–∞–ª–æ–≥` - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ –∑–∞—è–≤–æ–∫
- `/create` –∏–ª–∏ `/—Å–æ–∑–¥–∞—Ç—å` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–∏
- `/profile` –∏–ª–∏ `/–ø—Ä–æ—Ñ–∏–ª—å` - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
- `/help` –∏–ª–∏ `/–ø–æ–º–æ—â—å` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞

## üîß API Endpoints

- `POST /webhook/:token` - Webhook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç MAX
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞
- `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `data/`.

**–¢–∞–±–ª–∏—Ü—ã:**
- `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞
- `requests` - –ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–º–æ—â—å
- `responses` - –û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –∑–∞—è–≤–∫–∏
- `user_states` - –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)

## üê≥ Docker

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

```bash
docker build -t dobro-max-bot .
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker run -d \
  --name dobro-max-bot \
  -p 3000:3000 \
  --env-file .env \
  -v $(pwd)/data:/app/data \
  dobro-max-bot
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
docker logs -f dobro-max-bot
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker stop dobro-max-bot
docker rm dobro-max-bot
```

## üì¶ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Heroku / Railway / Render

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
   - `BOT_TOKEN`
   - `WEBHOOK_URL`
   - `MAX_API_URL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `https://platform-api.max.ru`)
   - `PORT` (–æ–±—ã—á–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

2. –£–∫–∞–∂–∏—Ç–µ `WEBHOOK_URL` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω

3. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MAX

### VPS / –°–µ—Ä–≤–µ—Ä

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Docker (—Å–º. –≤—ã—à–µ)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MAX API

```bash
npm run test-bot
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ health check

```bash
curl http://localhost:3000/health
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–µ MAX
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)
- Webhook URL –∑–∞—â–∏—â–µ–Ω —Ç–æ–∫–µ–Ω–æ–º –≤ –ø—É—Ç–∏
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- Docker-–æ–±—Ä–∞–∑ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –í–∫–ª–∞–¥

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –ª—é–±—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è!

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MAX

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MAX Bot API](https://dev.max.ru/docs/api)
- [–ü—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç-–±–æ—Ç–æ–≤](https://dev.max.ru/docs/legal/rules)

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π URL –¥–ª—è webhook (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok)
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è PostgreSQL)

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω:**
   ```bash
   npm run test-bot
   ```
   –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É 401 - —Ç–æ–∫–µ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –Ω–∞ https://dev.max.ru

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker
   docker logs -f dobro-max-bot
   
   # –ò–ª–∏ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ
   npm run dev
   ```
   –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤ –ª–æ–≥–∞—Ö

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook URL –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ø–∞–Ω–µ–ª–∏ MAX
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç: `curl http://localhost:3000/health`

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:**
   - –í –ª–æ–≥–∞—Ö –±—É–¥—É—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
   - –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–±—É–µ—Ç —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã API endpoint'–æ–≤
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É 400 - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–≥–∞—Ö

### Callback-–∫–Ω–æ–ø–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ `message_callback` –∏–ª–∏ `callback_query`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤ `bot/keyboards/index.js`
- –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–æ–±—ã—Ç–∏–π

### Webhook –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è

- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ WEBHOOK_URL –Ω–µ localhost:** –ë–æ—Ç –≤—ã–≤–µ–¥–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, –µ—Å–ª–∏ webhook URL —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ localhost
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** `ngrok http 3000` –∏ –æ–±–Ω–æ–≤–∏—Ç–µ `WEBHOOK_URL` –≤ `.env`
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ø–∞–Ω–µ–ª–∏ MAX:** Webhook –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:** –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è –æ—Ç MAX –≤ –ª–æ–≥–∞—Ö –ø–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–∏–ø–µ —Å–æ–±—ã—Ç–∏—è

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker logs -f dobro-max-bot` –∏–ª–∏ `npm run dev`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: `npm run test-bot`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ webhook URL –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ (–Ω–µ localhost!)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫" –≤—ã—à–µ
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ø–∞–Ω–µ–ª–∏ MAX –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

