# –î–æ–±—Ä–æ –≤ MAX - –ë–æ—Ç –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ MAX

–ë–æ—Ç –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ MAX, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìã –ö–∞—Ç–∞–ª–æ–≥ –∑–∞—è–≤–æ–∫ –Ω–∞ –ø–æ–º–æ—â—å
- ‚ûï –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫
- ‚úã –û—Ç–∫–ª–∏–∫ –Ω–∞ –∑–∞—è–≤–∫–∏
- üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —Ä–µ–≥–∏–æ–Ω–∞–º

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 16+ 
- npm –∏–ª–∏ yarn
- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç MAX (–ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –±–æ—Ç–∞)

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd DOBRO_V_MAX
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:
```bash
cp .env.example .env
```

4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env` —Ñ–∞–π–ª:
```env
BOT_TOKEN=your-bot-token-here
WEBHOOK_URL=https://your-domain.com
MAX_API_URL=https://api.max.ru
PORT=3000
DB_PATH=./data/dobro.db
```

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API

```bash
npm run test-bot
```

### 3. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
npm run dev
```

### 4. –ü—Ä–æ–¥–∞–∫—à–Ω

```bash
npm start
```

**–í–∞–∂–Ω–æ:** –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL –¥–ª—è webhook.

## üì° –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook:

```bash
npm run setup-webhook
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:3000/set-webhook/YOUR_BOT_TOKEN
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ server.js              # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ config.js              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ api.js             # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è MAX
‚îÇ   ‚îú‚îÄ‚îÄ handlers/          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/         # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–∫–Ω–æ–ø–∫–∏)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ messages/          # –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îî‚îÄ‚îÄ database/          # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ       ‚îî‚îÄ‚îÄ index.js
‚îú‚îÄ‚îÄ data/                  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
‚îî‚îÄ‚îÄ scripts/               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
```

## üìù –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/catalog` –∏–ª–∏ `/–∫–∞—Ç–∞–ª–æ–≥` - –ö–∞—Ç–∞–ª–æ–≥ –∑–∞—è–≤–æ–∫
- `/create` –∏–ª–∏ `/—Å–æ–∑–¥–∞—Ç—å` - –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É
- `/profile` –∏–ª–∏ `/–ø—Ä–æ—Ñ–∏–ª—å` - –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- `/help` –∏–ª–∏ `/–ø–æ–º–æ—â—å` - –°–ø—Ä–∞–≤–∫–∞

## üîß API Endpoints

- `POST /webhook/:token` - Webhook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç MAX
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- `GET /set-webhook/:token` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook

## üì¶ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker

```bash
docker build -t dobro-max-bot .
docker run -p 3000:3000 --env-file .env dobro-max-bot
```

### Heroku / Railway / Render

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –£–∫–∞–∂–∏—Ç–µ `WEBHOOK_URL` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run setup-webhook` –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –í–∫–ª–∞–¥

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –ª—é–±—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è!
